{
  "reports": [
    {
      "id": "monthly_revenue_report",
      "category": "finance",
      "title": "Monthly Revenue (CNY)",
      "description": "Monthly revenue trend based on pay_time and cny_amount.",
      "chart_type": "line",
      "source_table": "Fact_Order",
      "joins": [],
      "group_by": "DATE_FORMAT(pay_time, '%Y-%m')",
      "measure_formula": "SUM(cny_amount)",
      "measures": [
        {
          "column": "calculated",
          "label": "Revenue (CNY)"
        }
      ],
      "x_axis": {
        "column": "pay_time",
        "label": "Month",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "app_key",
        "region_key"
      ],
      "image": ""
    },
    {
      "id": "device_activation",
      "category": "device",
      "title": "\u8bbe\u5907\u6fc0\u6d3b\u91cf",
      "description": "\u5404\u578b\u53f7\u8bbe\u5907\u6fc0\u6d3b\u4e0e\u7ed1\u5b9a\u8d8b\u52bf",
      "chart_type": "bar",
      "source_table": "Dim_Device",
      "joins": [],
      "group_by": "first_bind_time",
      "measure_formula": "COUNT(device_id)",
      "measures": [],
      "x_axis": {
        "column": "first_bind_time",
        "label": "Time",
        "type": "time",
        "granularity_options": [
          "day",
          "month"
        ]
      },
      "filters": [],
      "slices": [],
      "image": null
    },
    {
      "id": "report_1767035922235",
      "category": "finance",
      "title": "\u65e5\u5ea6\u5747\u644a\u8425\u6536\u8d8b\u52bf ",
      "description": "\u6309\u5929\u7edf\u8ba1\u7684\u786e\u8ba4\u8425\u6536\u589e\u957f\u8d8b\u52bf\uff0c\u5e74\u5957\u9910/12\u5747\u644a\u5230\u6bcf\u4e2a\u6708\u4e2d",
      "chart_type": "line",
      "source_table": "Fact_Accounting_Revenue",
      "joins": [],
      "group_by": "time_key",
      "measure_formula": "SUM(recognized_amount)",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "time_key",
        "label": "time_key",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "time_key",
        "app_key",
        "plan_key",
        "region_key"
      ],
      "image": ""
    },
    {
      "id": "report_1767036146371",
      "category": "finance",
      "title": "\u6708\u5ea6\u5747\u644a\u8425\u6536\u8d8b\u52bf  (Copy)",
      "description": "\u6309\u6708\u7edf\u8ba1\u7684\u786e\u8ba4\u8425\u6536\u589e\u957f\u8d8b\u52bf\uff0c\u5e74\u5957\u9910/12\u5747\u644a\u5230\u6bcf\u4e2a\u6708\u4e2d",
      "chart_type": "line",
      "source_table": "Fact_Accounting_Revenue",
      "joins": [],
      "group_by": "time_key",
      "measure_formula": "SUM(recognized_amount)",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "time_key",
        "label": "time_key",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "time_key",
        "app_key",
        "plan_key",
        "region_key"
      ],
      "image": ""
    },
    {
      "id": "report_1767036401311",
      "category": "user",
      "title": "\u6708\u5ea6\u65b0\u589e\u7528\u6237\u8d8b\u52bf ",
      "description": "\u6bcf\u6708\u65b0\u589e\u6ce8\u518c\u7528\u6237\u6570\u7edf\u8ba1",
      "chart_type": "bar",
      "source_table": "Dim_User_all",
      "joins": [],
      "group_by": "join_date",
      "measure_formula": "COUNT(user_id)",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "join_date",
        "label": "join_date",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "join_date",
        "app_key",
        "region_key"
      ],
      "image": ""
    },
    {
      "id": "new_users",
      "category": "user",
      "title": "\u65e5\u5ea6\u65b0\u589e\u7528\u6237\u8d8b\u52bf",
      "description": "\u6bcf\u65e5\u65b0\u589e\u6ce8\u518c\u7528\u6237\u6570\u7edf\u8ba1",
      "chart_type": "bar",
      "source_table": "Dim_User_all",
      "joins": [],
      "group_by": "join_date",
      "measure_formula": "COUNT(user_id)",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "join_date",
        "label": "join_date",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "join_date",
        "app_key",
        "region_key"
      ],
      "image": ""
    },
    {
      "id": "report_1767036509604",
      "category": "user",
      "title": "30\u5929\u8f6c\u5316\u7387\uff08\u6708\u5ea6\uff09",
      "description": "\u5355\u4e2a\u7528\u6237\u6ce8\u518c\u5b8c\u6210\u540e\uff0c30\u5929\u5185\u662f\u5426\u5b8c\u6210\u4ed8\u8d39\uff08\u652f\u4ed8\u91d1\u989d\u5927\u4e8e0\uff09\u3002\n\u7edf\u8ba1\u4e00\u4e2a\u5468\u671f\u5185\u7684\u8be5\u8f6c\u5316\u7387",
      "chart_type": "line",
      "source_table": "Dim_User_all",
      "joins": [],
      "group_by": "join_date",
      "measure_formula": "SUM(1) / COUNT(User)",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "join_date",
        "label": "join_date",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "app_key",
        "region_key"
      ],
      "image": ""
    },
    {
      "id": "report_1767037084307",
      "category": "user",
      "title": "\u8ba2\u9605\u670d\u52a1\u7528\u6237\u6570\uff08\u6708\u5ea6\uff09",
      "description": "\u8fd9\u4e2a\u6708\uff0c\u4ea7\u751f\u4ed8\u8d39 (>0) \u7684\u7528\u6237\u6570\uff0c\u5e74\u5957\u9910\u4ed8\u8d39\u5747\u644a\u523012\u4e2a\u6708\u91cc\u9762\uff0c\u5e74\u5957\u9910\u7406\u89e3\u6210\u4e3a\u9884\u4ed8\u8d39\u3002\uff08\u7b49\u540c\u4e8e\u5747\u644a\u8425\u6536\u91cc\u9762\u672c\u6708\u662f\u5426\u5b58\u5728\u4ed8\u8d39\uff09",
      "chart_type": "line",
      "source_table": "Fact_Accounting_Revenue",
      "joins": [],
      "group_by": "user_surrogate_key",
      "measure_formula": "count (distinct (user_surrogate_key))",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "user_surrogate_key",
        "label": "user_surrogate_key",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "app_key",
        "region_key"
      ],
      "image": ""
    },
    {
      "id": "report_1767038125422",
      "category": "user",
      "title": "\u8ba2\u9605\u670d\u52a1\u7528\u6237\u9996\u6708\u5728\u671f\u7387\uff08\u6708\u5ea6\uff09",
      "description": "\u89c2\u5bdf\u65b0\u4ed8\u8d39/\u56de\u8d2d\u7528\u6237\u7684\u5728\u6709\u6548\u671f\u7684\u60c5\u51b5\u3002\n\u4e0a\u4e00\u4e2a\u6708\u65b0\u4ed8\u8d39/\u56de\u8d2d\u7528\u6237\u4e2d\uff0c\u4e0b\u4e00\u4e2a\u7ee7\u7eed\u5728\u6709\u6548\u671f\u7684\u5360\u6bd4\u3002\uff08\u5e74\u5957\u9910\u7406\u89e3\u6210\u4e3a12\u4e2a\u6708\u9884\u4ed8\u8d39\uff09",
      "chart_type": "line",
      "source_table": "Fact_Accounting_Revenue",
      "joins": [],
      "group_by": "",
      "measure_formula": "",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "",
        "label": "",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [],
      "image": ""
    },
    {
      "id": "revenue_trend",
      "category": "finance",
      "title": "\u6708\u5ea6\u8425\u6536\u8d8b\u52bf",
      "description": "\u6309\u6708\u7edf\u8ba1\u7684\u73b0\u91d1\u8425\u6536\u589e\u957f\u8d8b\u52bf",
      "chart_type": "line",
      "source_table": "Fact_Order",
      "joins": [],
      "group_by": "pay_time",
      "measure_formula": "SUM(amount)",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "pay_time",
        "label": "pay_time",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "time_key",
        "app_key",
        "region_key",
        "plan_key",
        "paid_sequence"
      ],
      "image": ""
    },
    {
      "id": "report_1767035739458",
      "category": "finance",
      "title": "\u65e5\u5ea6\u8425\u6536\u8d8b\u52bf",
      "description": "\u6309\u5929\u7edf\u8ba1\u7684\u73b0\u91d1\u8425\u6536\u589e\u957f\u8d8b\u52bf",
      "chart_type": "line",
      "source_table": "Fact_Order",
      "joins": [],
      "group_by": "pay_time",
      "measure_formula": "SUM(amount)",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "pay_time",
        "label": "pay_time",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "time_key",
        "app_key",
        "plan_key",
        "region_key",
        "paid_sequence"
      ],
      "image": ""
    },
    {
      "id": "report_1767039576696",
      "category": "user",
      "title": "\u5e74\u5957\u9910\u5360\u6bd4\uff08\u6708\u5ea6\uff09",
      "description": "\u6bcf\u6708\u65b0\u4ed8\u8d39\u8ba2\u9605\u7684\u5957\u9910\u4e2d\uff0c\u5e74\u5957\u9910\u7684\u5360\u6bd4",
      "chart_type": "line",
      "source_table": "Fact_Order",
      "joins": [],
      "group_by": "pay_time",
      "measure_formula": "",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "pay_time",
        "label": "pay_time",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "app_key",
        "region_key"
      ],
      "image": ""
    },
    {
      "id": "report_1767038505303",
      "category": "user",
      "title": "\u6708\u5957\u9910\u8ba2\u9605\u9996\u6708\u7eed\u8d39\u7387\uff08\u6708\u5ea6\uff09",
      "description": "\u4e0a\u4e00\u4e2a\u6708\u4ed8\u8d39\u8ba2\u9605\u7684\u6708\u5957\u9910\uff0c\u4e0b\u4e00\u4e2a\u6708\u7ee7\u7eed\u7eed\u8d39\u7684\u5360\u6bd4",
      "chart_type": "line",
      "source_table": "Fact_Subscription",
      "joins": [],
      "group_by": "first_paid_time",
      "measure_formula": "",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "first_paid_time",
        "label": "first_paid_time",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [],
      "image": ""
    },
    {
      "id": "report_1767038657350",
      "category": "user",
      "title": "\u5e74\u5957\u9910\u8ba2\u9605\u9996\u5e74\u7eed\u8d39\u7387\uff08\u6708\u5ea6\uff09",
      "description": "\u8fd9\u4e2a\u6708\u4e2d\uff0c\u4ed8\u8d39\u65b0\u8ba2\u9605\u7684\u5e74\u5957\u9910\uff0c\u4e0b\u4e00\u5e74\u7ee7\u7eed\u7eed\u8d39\u7684\u5360\u6bd4",
      "chart_type": "line",
      "source_table": "Fact_Subscription",
      "joins": [],
      "group_by": "first_paid_time",
      "measure_formula": "",
      "measures": [
        {
          "column": "calculated",
          "label": "Value"
        }
      ],
      "x_axis": {
        "column": "first_paid_time",
        "label": "first_paid_time",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "app_key",
        "region_key"
      ],
      "image": ""
    },
    {
      "id": "monthly_paid_orders",
      "category": "finance",
      "title": "Monthly Orders: New vs Renewal",
      "description": "Breakdown of monthly paying orders into New (First Order) and Renewal (Subsequent).",
      "chart_type": "bar",
      "source_table": "Fact_Order",
      "group_by": "DATE_FORMAT(pay_time, '%Y-%m')",
      "measure_formula": "COUNT(DISTINCT CASE WHEN paid_sequence = 1 THEN order_uuid END) as New, COUNT(DISTINCT CASE WHEN paid_sequence > 1 THEN order_uuid END) as Renewal",
      "measures": [
        {
          "column": "calculated",
          "label": "New"
        },
        {
          "column": "calculated",
          "label": "Renewal"
        }
      ],
      "x_axis": {
        "column": "pay_time",
        "label": "Month",
        "type": "category",
        "granularity_options": []
      },
      "filters": [],
      "slices": [
        "app_key",
        "region_key"
      ],
      "base_where": "cny_amount > 0 AND pay_time >= '2024-01-01 00:00:00'",
      "image": ""
    },
    {
      "id": "monthly_retention_cohort",
      "category": "user",
      "title": "Monthly Subscription Retention Cohort",
      "description": "Retention rates for monthly subscriptions starting from 2024-02-01. M2: Renewed after 30 days, M3: 60 days, etc.",
      "chart_type": "matrix",
      "source_table": "Fact_Order",
      "joins": [
        {
          "table": "Fact_Subscription",
          "join_type": "LEFT",
          "on_expression": "Fact_Order.subscription_key = Fact_Subscription.subscription_key"
        }
      ],
      "group_by": "DATE_FORMAT(Fact_Order.pay_time, '%Y-%m')",
      "measure_formula": "AVG(CASE WHEN DATEDIFF(Fact_Subscription.last_paytime, Fact_Order.pay_time) >= 29 THEN 100 ELSE 0 END) as 'Month 2', AVG(CASE WHEN DATEDIFF(Fact_Subscription.last_paytime, Fact_Order.pay_time) >= 59 THEN 100 ELSE 0 END) as 'Month 3', AVG(CASE WHEN DATEDIFF(Fact_Subscription.last_paytime, Fact_Order.pay_time) >= 89 THEN 100 ELSE 0 END) as 'Month 4', AVG(CASE WHEN DATEDIFF(Fact_Subscription.last_paytime, Fact_Order.pay_time) >= 119 THEN 100 ELSE 0 END) as 'Month 5', AVG(CASE WHEN DATEDIFF(Fact_Subscription.last_paytime, Fact_Order.pay_time) >= 149 THEN 100 ELSE 0 END) as 'Month 6', AVG(CASE WHEN DATEDIFF(Fact_Subscription.last_paytime, Fact_Order.pay_time) >= 179 THEN 100 ELSE 0 END) as 'Month 7', AVG(CASE WHEN DATEDIFF(Fact_Subscription.last_paytime, Fact_Order.pay_time) >= 209 THEN 100 ELSE 0 END) as 'Month 8', AVG(CASE WHEN DATEDIFF(Fact_Subscription.last_paytime, Fact_Order.pay_time) >= 239 THEN 100 ELSE 0 END) as 'Month 9', AVG(CASE WHEN DATEDIFF(Fact_Subscription.last_paytime, Fact_Order.pay_time) >= 269 THEN 100 ELSE 0 END) as 'Month 10', AVG(CASE WHEN DATEDIFF(Fact_Subscription.last_paytime, Fact_Order.pay_time) >= 299 THEN 100 ELSE 0 END) as 'Month 11', AVG(CASE WHEN DATEDIFF(Fact_Subscription.last_paytime, Fact_Order.pay_time) >= 329 THEN 100 ELSE 0 END) as 'Month 12'",
      "measures": [],
      "x_axis": {
        "column": "pay_time",
        "label": "Cohort Month",
        "type": "category"
      },
      "filters": [],
      "slices": [
        "app_key",
        "region_key"
      ],
      "base_where": "Fact_Order.paid_sequence = 1 AND Fact_Order.plan_p_type = 'month' AND Fact_Order.pay_time >= '2024-07-01 00:00:00' AND Fact_Order.pay_time <= '2025-11-30 23:59:59'",
      "image": ""
    },
    {
      "id": "user_registration_lag_analysis",
      "category": "user",
      "title": "User Registration to First Payment Lag",
      "description": "Distribution of time elapsed from registration to first payment. M0: Same Month, M1: 1 Month before, etc.",
      "chart_type": "matrix",
      "source_table": "Fact_Order",
      "joins": [
        {
          "table": "Dim_User_all",
          "join_type": "INNER",
          "on_expression": "Fact_Order.user_uid = Dim_User_all.uid"
        }
      ],
      "group_by": "DATE_FORMAT(Fact_Order.pay_time, '%Y-%m')",
      "measure_formula": "100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 0 THEN 1 ELSE 0 END) / COUNT(*) as 'M0', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 1 THEN 1 ELSE 0 END) / COUNT(*) as 'M1', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 2 THEN 1 ELSE 0 END) / COUNT(*) as 'M2', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 3 THEN 1 ELSE 0 END) / COUNT(*) as 'M3', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 4 THEN 1 ELSE 0 END) / COUNT(*) as 'M4', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 5 THEN 1 ELSE 0 END) / COUNT(*) as 'M5', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 6 THEN 1 ELSE 0 END) / COUNT(*) as 'M6', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 7 THEN 1 ELSE 0 END) / COUNT(*) as 'M7', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 8 THEN 1 ELSE 0 END) / COUNT(*) as 'M8', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 9 THEN 1 ELSE 0 END) / COUNT(*) as 'M9', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 10 THEN 1 ELSE 0 END) / COUNT(*) as 'M10', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 11 THEN 1 ELSE 0 END) / COUNT(*) as 'M11', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) = 12 THEN 1 ELSE 0 END) / COUNT(*) as 'M12', 100 * SUM(CASE WHEN TIMESTAMPDIFF(MONTH, Dim_User_all.join_date, Fact_Order.pay_time) >= 13 THEN 1 ELSE 0 END) / COUNT(*) as 'M13+'",
      "measures": [],
      "x_axis": {
        "column": "pay_time",
        "label": "Payment Month",
        "type": "category"
      },
      "filters": [],
      "slices": [
        "app_key",
        "region_key"
      ],
      "base_where": "Fact_Order.cny_amount > 0 AND Fact_Order.paid_sequence = 1 AND Fact_Order.pay_time >= '2024-01-01 00:00:00' AND Fact_Order.pay_time <= '2025-12-31 23:59:59'",
      "image": ""
    }
  ]
}